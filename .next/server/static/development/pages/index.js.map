{"version":3,"file":"static/development/pages/index.js","sources":["webpack:///webpack/bootstrap","webpack:///./components/Card/Card.module.css","webpack:///./components/Card/index.js","webpack:///./components/ChatRoom/ChatRoom.module.css","webpack:///./components/ChatRoom/index.js","webpack:///./components/InputBox/InputBox.module.css","webpack:///./components/InputBox/index.js","webpack:///./components/Post/Post.module.css","webpack:///./components/Post/index.js","webpack:///./components/TimeAgo/index.js","webpack:///./helpers.js","webpack:///./hooks/useInputState.js","webpack:///./pages/index.js","webpack:///external \"grommet\"","webpack:///external \"grommet-icons\"","webpack:///external \"isomorphic-unfetch\"","webpack:///external \"moment\"","webpack:///external \"next-absolute-url\"","webpack:///external \"react\""],"sourcesContent":[" \t// The module cache\n \tvar installedModules = require('../../../ssr-module-cache.js');\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tvar threw = true;\n \t\ttry {\n \t\t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n \t\t\tthrew = false;\n \t\t} finally {\n \t\t\tif(threw) delete installedModules[moduleId];\n \t\t}\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","// Exports\nmodule.exports = {\n\t\"Card\": \"Card_Card__3pcRI\",\n\t\"front\": \"Card_front__zmVa8\",\n\t\"back\": \"Card_back__1HFy_\"\n};","import { Stack } from 'grommet';\nimport styles from  './Card.module.css';\n\nfunction Card({children, back}) {\n  return (\n    <div className={styles.Card}> \n      <Stack>\n        <div className={styles.front}>\n          {children}\n        </div>\n        \n        <div className={styles.back}>\n          {back}\n        </div>\n      </Stack> \n    </div>\n  );\n}\n\nexport default Card;","// Exports\nmodule.exports = {\n\t\"ChatRoom\": \"ChatRoom_ChatRoom__b-Uwd\",\n\t\"inputBox\": \"ChatRoom_inputBox__3YtCX\"\n};","import { useState } from 'react';\nimport Post from '../Post';\nimport { submitPost } from '../../helpers';\nimport InputBox from '../InputBox';\nimport styles from './ChatRoom.module.css';\n\nfunction ChatRoom({posts: initialPosts, users, currentUser}) {\n  const [posts, setPosts] = useState(initialPosts);\n\n  const addPost = (message) => {\n    submitPost({ \n      message,\n      ts: Date.now(),\n      user: currentUser.id \n    })\n    .then(allPosts => setPosts(allPosts));\n  }\n\n  const postUser = (post) => {\n    const {user: userId} = post;\n    if (userId === currentUser.id) {\n      return currentUser;\n    }\n    return users.find(user => user.id === userId)\n  }\n\n  return (\n    <div className={styles.ChatRoom}>\n      {\n        posts.map(post => (\n          <Post\n            key={post.ts}\n            post={post}\n            user={postUser(post)}\n            byCurrentUser={post.user == currentUser.id}\n          />\n        ))\n      }\n      \n\n      <div className={styles.inputBox}>\n        <InputBox submit={addPost} />\n      </div>\n    </div>\n  );\n}\n\nexport default ChatRoom;","// Exports\nmodule.exports = {\n\t\"InputBox\": \"InputBox_InputBox__2xjhv\",\n\t\"charactersLeft\": \"InputBox_charactersLeft__pqrAn\",\n\t\"textForm\": \"InputBox_textForm__1zxsj\",\n\t\"textBox\": \"InputBox_textBox__2uDhM\",\n\t\"submit\": \"InputBox_submit__1R52E\"\n};","import { Send } from 'grommet-icons';\nimport useInputState from '../../hooks/useInputState';\nimport styles from './InputBox.module.css';\n\nfunction InputBox({submit}) {\n  const { value, setValue, resetValue, charactersLeft } = useInputState('', 140);\n  \n  const onSubmit = (event) => {\n    event.preventDefault();\n    if(value) {\n      submit(value);\n      resetValue();\n    }\n  }\n\n  return (\n    <div className={styles.InputBox}>\n      <div className={styles.charactersLeft}>\n        {charactersLeft}\n      </div>\n      \n      <form className={styles.textForm} onSubmit={onSubmit}>\n        <input \n          className={styles.textBox}\n          type=\"text\"\n          value={value}\n          placeholder=\"what's happening\"\n          onChange={setValue}\n        />\n      </form>\n      \n      <div>\n        <Send className={styles.submit} onClick={onSubmit} />\n      </div>\n    </div>\n  );\n}\n\nexport default InputBox;","// Exports\nmodule.exports = {\n\t\"Post\": \"Post_Post__7Cg2L\",\n\t\"avatar\": \"Post_avatar__U69bw\",\n\t\"contentWrapper\": \"Post_contentWrapper__uPHZs\",\n\t\"metadata\": \"Post_metadata__2gGrb\",\n\t\"user\": \"Post_user__kp333\",\n\t\"divider\": \"Post_divider__3WA4H\",\n\t\"username\": \"Post_username__15KgH\",\n\t\"verified\": \"Post_verified__1WN9g\",\n\t\"message\": \"Post_message__3xKfh\",\n\t\"activeDate\": \"Post_activeDate__3vVgd\",\n\t\"icon\": \"Post_icon__mKgTE\",\n\t\"byCurrentUser\": \"Post_byCurrentUser__1xZSM\",\n\t\"avatarWrapper\": \"Post_avatarWrapper__1_B7t\"\n};","import { Validate, Calendar } from 'grommet-icons';\nimport moment from 'moment';\nimport TimeAgo from '../TimeAgo';\nimport Card from '../Card';\nimport styles from  './Post.module.css';\n\nfunction Post({post, user, byCurrentUser}) {\n  if(!post) return null;\n\n  const { message, ts } = post;\n  const { real_name, username, verified} = user;\n\n  return (\n    <div className={`${styles.Post} ${byCurrentUser ? styles.byCurrentUser:''}`}>\n      <div>\n        <div className={styles.avatarWrapper}>\n          <img \n            className={styles.avatar} \n            src={byCurrentUser ? '/images/better-icon.svg':`/images/${username}.jpg`}\n            alt={`${username}'s avatar`}\n          />\n        </div>\n      </div>\n\n      <div className={styles.contentWrapper}>\n        <div className={styles.metadata}>\n          <div className={styles.user}>\n            {\n              !byCurrentUser &&\n              <span>\n                {real_name} \n                <span className={styles.divider}>-</span>\n                <span className={styles.username}>\n                  <a>\n                    @{username}\n                    {\n                      verified && \n                      <span title=\"verified\">\n                        <Validate className={styles.verified} />\n                      </span>\n                    }\n                  </a>\n                </span>\n                \n              </span>\n            }\n          </div>\n          <div>\n            <TimeAgo timestamp={ts} />\n          </div>\n        </div>\n\n\n        {\n          byCurrentUser ? \n          <p className={styles.message}>{message}</p>\n          :\n          <Card\n            back={(\n              <p className={styles.activeDate}>\n                <Calendar className={styles.icon} />\n                <span>active since</span>\n                <span>\n                  {moment(user.created_at).format('MMMM DD, YYYY')}\n                </span>\n              </p>\n            )}\n          >\n            <p className={styles.message}>{message}</p>\n          </Card>\n        }\n      </div>\n    </div>\n  );\n}\n\nexport default Post;","import { useState, useEffect } from 'react';\nimport moment from 'moment';\n\n\nfunction TimeAgo({timestamp}) {\n  const initialTimeAgo = moment(timestamp).fromNow();\n  const [timeAgo, setTimeAgo] = useState(initialTimeAgo);\n\n  useEffect(() => {\n    const timeAgoInterval = setInterval(updateTimeAgo, 30000);\n    return () => clearTimeout(timeAgoInterval);\n  });\n  \n  const updateTimeAgo = () => {\n    const newTimeAgo = moment(timestamp).fromNow();\n    if(newTimeAgo !== timeAgo) setTimeAgo(newTimeAgo);\n  }\n\n\n  return (<span>{timeAgo}</span>);\n}\n\nexport default TimeAgo;","export function submitPost(newPost) {\n  return fetch('/api/posts', {\n    method: 'post',\n    body: JSON.stringify(newPost),\n    headers: {\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': 'application/json'\n    },\n  })\n  .then(response => response.json())\n  .catch(error => console.log(error));\n  \n}","import { useState } from 'react';\n\nexport default (initialValue, maximumLength) => {\n  const [value, setValue] = useState(initialValue);\n\n  const updateValue = (event) => {\n    const newValue = event.target.value;\n\n    if (newValue.length <= maximumLength) {\n      setValue(newValue);\n    }\n  }\n\n  const resetValue = () => {\n    setValue(initialValue)\n  }\n\n  return {\n    value,\n    setValue: updateValue,\n    resetValue,\n    charactersLeft: maximumLength - value.length\n  }\n}","import fetch from 'isomorphic-unfetch';\nimport absoluteUrl from 'next-absolute-url';\nimport ChatRoom from '../components/ChatRoom';\n\n// placeholder for current user ;\nconst CURRENT_USER = { \n  \"id\": \"current_user\",\n} \n\nfunction App({users, posts}) {\n  return (\n    <div className=\"App\">\n      <ChatRoom \n        users={users} \n        posts={posts} \n        currentUser={CURRENT_USER}\n      />\n    </div>\n  );\n}\n\n// async fetch on server-side for SSR\nApp.getInitialProps = async function({req}) {\n  const { protocol, host } = absoluteUrl(req);\n  const response =  await fetch(`${protocol}//${host}/api/chatroom`);\n  const  json = await response.json();\n  const { users, posts } = json;\n  return { users, posts };\n}\n\nexport default App;","module.exports = require(\"grommet\");","module.exports = require(\"grommet-icons\");","module.exports = require(\"isomorphic-unfetch\");","module.exports = require(\"moment\");","module.exports = require(\"next-absolute-url\");","module.exports = require(\"react\");"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACxFA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;ACLA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAMA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;;;;;;;;;;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;ACPA;AACA;AACA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","sourceRoot":""}